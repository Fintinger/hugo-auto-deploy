---
date: 2020-09-20
title: Javascriptæ­£åˆ™è¡¨è¾¾å¼
tags:
  - Javascript
  - æ­£åˆ™
categories:
  - å‰ç«¯
sticky: 4 
---

> å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»ºï¼Œå°±ä¸åšè¿‡å¤šçš„èµ˜è¿°

::: tip

ç”±äºä¸çŸ¥ååŸå› ï¼Œspanæ ‡ç­¾æŠ¥é”™ï¼Œå› æ­¤å…¨éƒ¨æ›¿æ¢ä¸º[sp]

:::

## å…³äºè½¬ä¹‰

#### 1.å­—é¢é‡å½¢å¼åˆ›å»ºçš„RegExp

**è½¬ä¹‰å½¢å¼ï¼š** `\d`, `\.`, `\s` ç­‰

```javascript
let str='fintinger2592030861.com$323e'
let reg=/\d+\.com/
str.match(reg);//2592030861.com
```

#### 2.å¯¹è±¡å½¢å¼åˆ›å»ºçš„RegExp

**è½¬ä¹‰å½¢å¼ï¼š** `\\d`, `\\.`, `\\s`ç­‰

```javascript
let str = 'fintinger2592030861.com$323e'
let reg = new RegExp('\\d+\\.com', 'g')
str.match(reg)//2592030861.com
```

## è¾¹ç•Œçº¦æŸ

> åˆ©ç”¨`^`å’Œ`$`åˆ†åˆ«é™åˆ¶å¼€å¤´å’Œç»“å°¾

```javascript
let str = 'bdhw42556jbjkhb2592030861jrh4jbhkfehrbj43jk32kbbjhb'
let reg = /\d{3,6}/
let reg2 = /^\d{3,6}$/
str.match(reg)//42556
str.match(reg2)//null
```

## å…ƒå­—ç¬¦

|   å…ƒå­—ç¬¦    | ç”¨æ³•                                        |
| :---------: | :------------------------------------------ |
| `\d` & `\D` | è¡¨ç¤ºæ•°å­—å’Œéæ•°å­—                            |
| `\s` & `\S` | è¡¨ç¤ºç©ºç™½ï¼ˆç©ºæ ¼ï¼Œæ¢è¡Œï¼ŒTabåˆ¶è¡¨ç¬¦ç­‰ï¼‰å’Œéç©ºç™½ |
| `\w` & `\W` | è¡¨ç¤ºå­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿å’Œé...               |
|     `.`     | æŸ¥æ‰¾å•ä¸ªå­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œå’Œè¡Œç»“æŸç¬¦            |

## æ¨¡å¼ä¿®æ­£ç¬¦

| ä¿®é¥°ç¬¦ | æè¿°                                                     |
| :----- | :------------------------------------------------------- |
| `i`    | æ‰§è¡Œå¯¹å¤§å°å†™ä¸æ•æ„Ÿçš„åŒ¹é…ã€‚                               |
| `g`    | æ‰§è¡Œå…¨å±€åŒ¹é…ï¼ˆæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…è€Œéåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ååœæ­¢ï¼‰ã€‚ |
| `m`    | æ‰§è¡Œå¤šè¡ŒåŒ¹é…ã€‚                                           |

## å­—ç¬¦å±æ€§åŒ¹é… 

> Unicode Propertyï¼šå­—ç¬¦å±äºæ ‡ç‚¹ã€ç©ºæ ¼ã€å­—æ¯ç­‰ç­‰ã€‚æ¯ä¸ªUnicodeå­—ç¬¦åªèƒ½å±äºå”¯ä¸€Unicode Propertyã€‚.NETã€Javaã€PHPå’ŒRubyç­‰è¯­è¨€æ”¯æŒã€‚å…·ä½“ï¼Œ[GO](https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F#Unicode%E5%A4%84%E7%90%86)

![å›¾ç‰‡æ¥è‡ªç»´åŸºç™¾ç§‘](https://gitee.com/fintinger/figure-bed/raw/master//images/20200920101841.png)

## åŸå­ç»„å’ŒåŸå­è¡¨

#### 1.åŸå­è¡¨

**å®šä¹‰æ–¹æ³•** ï¼š`[]` 

**å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼š**

ğŸ‘‰ ç¼–ç»„å°±ä¼šç”¨ 'æˆ–' å…³ç³»åŒ¹é…

```javascript
/[123]/
//è¡¨ç¤º1|2|3
```

ğŸ‘‰ æ’é™¤åŒ¹é…

```javascript
/[^/d:-,]/
//è¡¨ç¤ºåŒ¹é…ä¸æ˜¯æ•°å­—,':','-',','çš„
```

**æ³¨æ„ï¼š** åŸå­è¡¨ä¸­çš„å­—ç¬¦å…¨ä¸ºå…¶æœ¬ä¹‰ï¼ˆé™¤éè½¬ä¹‰`\`ï¼‰ï¼Œä¸ä¼šè¿›è¡Œè§£æï¼Œæ¯”å¦‚ ' . ' ç­‰

ğŸ‘‰åŒ¹é…æ‰€æœ‰

```JavaScript
/[\d\D]/
//åŒ¹é…æ•°å­—ä¸éæ•°å­—ï¼Œå³æ‰€æœ‰
```

ğŸ‘‰èŒƒå›´åŒ¹é…

```javascript
/[a-z]/
//è¡¨ç¤ºa-zçš„æ‰€æœ‰å­—æ¯
```

#### 2.åŸå­ç»„

**å®šä¹‰æ–¹æ³•ï¼š** `()`

**å¸¸ç”¨æ–¹æ³•ï¼š**

ğŸ‘‰é‡å¤åŒ¹é…

```javascript
/(abc)/
//è¡¨ç¤ºåŒ¹é…'abc'æ•´ä½“å­—ç¬¦ä¸²
```

> åŸå­ç»„ä¸­çš„åˆ†ç»„ä¼šä¾æ¬¡ç¼–å·ï¼Œç”¨`\1,\2...`è·å–åˆ°

```javascript
let str = `<span>ohh[/sp]`
let reg = /<(sp)>(.+)<\/\1>/
let res = str.replace(reg, `<p>$2</p>`)
console.log(res);//<p>ohh</>
```

**æ³¨æ„ï¼š** æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨`\1`è·å–ï¼Œè€Œreplaceä¸­ç”¨`$2`è·å–ï¼

**ç¼–å·çš„æ›´å¤šç”¨æ³•**

ğŸ‘‰ **æ ‡è®°ä¸è®°å½•ç»„ **=> `?:`

```javascript
let str = `<span>ohh[/sp]`
let reg = /(?:<span>)(.+)(<\/sp>)/
let res = str.replace(reg, `$1`)
console.log(res);//ohh
```

è¿™é‡Œçš„$1è¡¨ç¤º'ohh'è¿™ä¸€ç»„ï¼Œå› ä¸º'[sp]'è¢«æ ‡è®°ä¸ºä¸è®°å½•ç»„

ğŸ‘‰ **è‡ªå®šä¹‰ç»„å**  => ` ?<name>`

```javascript
let str = `<span>ohh[/sp]`
let reg = /[sp](?<content>.+)<\/sp>/
let res = str.replace(reg, `<p>$<content></p>`)
console.log(res);//<p>ohh</p>
```

å½“åŸå­ç»„æ¯”è¾ƒå¤šæ—¶ç”¨è¿™ç§æ–¹æ³•å³å¯(åŸæ¥çš„`$1`ä¹Ÿå¯ä»¥å¾—åˆ°ï¼Œä¸ä¼šæ”¹å˜é¡ºåº)

## é‡å¤åŒ¹é…ä¸ç¦æ­¢è´ªå©ª

#### é‡å¤åŒ¹é…

| é‡è¯    | æè¿°                         |
| ------- | ---------------------------- |
| `+`     | åŒ¹é…1æˆ–å¤šä¸ªï¼Œç›¸å½“äº`{1,}`    |
| `*`     | åŒ¹é…0æˆ–å¤šä¸ªï¼Œç›¸å½“äº`{0,}`    |
| `?`     | åŒ¹é…0æˆ–1ä¸ªï¼Œç›¸å½“äºâ€œæœ‰æˆ–æ²¡æœ‰â€ |
| `{2}`   | åªå…è®¸åŒ¹é…2ä¸ªï¼Œé™å®šæ•°é‡      |
| `{2,4}` | å…è®¸åŒ¹é… [2, 10] ä¸ª          |

```javascript
let str='124ffr9fre12345ver'
reg=/\d{2,5}/g//åªå…è®¸åŒ¹é…2~5ä¸ªæ•°å­—
let res=str.match(reg)
console.log(res);/[ '124', '12345' ]
```

#### ç¦æ­¢è´ªå©ª

> åœ¨é‡å¤åŒ¹é…åé¢åŠ ä¸ŠÂ·`?`

| é‡è¯                          | æè¿°          |
| ----------------------------- | ------------- |
| `+?`                          | åªå…è®¸åŒ¹é…1ä¸ª |
| `*?`                          | åªå…è®¸0ä¸ª     |
| `{2,100}?` / `{2,}?` / `{2}?` | åªå…è®¸2ä¸ª     |

```javascript
let str=`
[sp]123[/sp]
[sp]å¼[/sp]
<span>ohh[/sp]
`
reg=/<(sp)>[\s\S]*?<\/\1>/g
let res=str.match(reg)
console.log(res);
//[ '[sp]123[/sp]', '[sp]å¼[/sp]', '<span>ohh[/sp]' ]
```

åˆ©ç”¨ç¦æ­¢è´ªå©ªï¼Œæ¯æ¬¡åªåŒ¹é…ä¸€ä¸ªç¬¦åˆæ­£åˆ™çš„å­—ä¸²(ä¸€ä¸ªspåŠä¸­é—´å†…å®¹)ï¼Œå¦‚æœä¸ç¦æ­¢è´ªå©ªï¼ˆå»æ‰æ­£åˆ™ä¸­?ï¼‰ï¼Œåˆ™ä¼šåŒ¹é…åˆ°ä»å¤´å¼€å§‹åˆ°æœ€åä¸€ä¸ªæ»¡è¶³ç»“å°¾çš„å­—ä¸²ï¼ˆæ‰€æœ‰çš„spåŠä¸­é—´å†…å®¹ï¼‰ã€‚

## ç›¸å…³æ–¹æ³•

#### å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•

> å³ String.prototypeä¸­çš„å…³äºæ­£åˆ™çš„æ–¹æ³•

ğŸ‘‰ `search()` 

è¿”å›æ­£åˆ™æ‰€åŒ¹é…åˆ°çš„å€¼çš„ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1

ğŸ‘‰ `match()`

è¿”å›æ­£åˆ™æ‰€åŒ¹é…çš„åˆ°çš„å­—ç¬¦ä¸²ï¼Œæ‰¾ä¸åˆ°è¿”å›null,**è¿”å›å€¼ä¸æ˜¯å¦æœ‰`\g`æœ‰å…³**

- å¦‚æœæ²¡æœ‰`\g`ï¼Œå³ä¸è¿›è¡Œå…¨å±€æŸ¥æ‰¾ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾äº†ä¸å®ƒæ‰¾åˆ°çš„åŒ¹é…æ–‡æœ¬æœ‰å…³çš„ä¿¡æ¯

![ä¸å…¨å±€è¿”å›å€¼](https://gitee.com/fintinger/figure-bed/raw/master//images/20200920164755.png)

- å¦‚æœæœ‰`\g`ï¼Œ match() æ–¹æ³•å°†æ‰§è¡Œå…¨å±€æ£€ç´¢ï¼Œæ‰¾åˆ° stringObject ä¸­çš„æ‰€æœ‰åŒ¹é…å­å­—ç¬¦ä¸²

ğŸ‘‰ `matchAll()`ï¼Œæ–°æ–¹æ³•ï¼Œå…·ä½“äº†è§£[GO](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll)

è¿”å›ä¸€ä¸ªåŒ…å«**æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœ**åŠ**åˆ†ç»„æ•è·ç»„**çš„è¿­ä»£å™¨

```javascript
const regexp = /t(e)(st(\d?))/g;
const str = 'test1test2';

const array = [...str.matchAll(regexp)];

console.log(array[0]);
// expected output: Array ["test1", "e", "st1", "1"]

console.log(array[1]);
// expected output: Array ["test2", "e", "st2", "2"]
```

ğŸ‘‰ `split()` / `replace()`ä¹Ÿæ”¯æŒæ­£åˆ™

...

#### æ­£åˆ™å¯¹è±¡æ–¹æ³•

ğŸ‘‰ `test()`

è¿”å›æ£€æµ‹çš„ç»“æœï¼Œtrue/false

ğŸ‘‰ `exec()`

>  åœ¨å…¨å±€æ¨¡å¼`\g`ä¸‹ï¼Œè°ƒç”¨ä¸€æ¬¡è¿”å›ä¸€æ¬¡å­˜æ”¾äº†ä¸å®ƒæ‰¾åˆ°çš„åŒ¹é…æ–‡æœ¬æœ‰å…³çš„ä¿¡æ¯çš„æ•°ç»„ï¼Œå¹¶ä¸”ä¼šä¿®æ”¹è¯¥æ­£åˆ™çš„`lastIndex`ä¸º**åŒ¹é…å­—ç¬¦ä¸‹ä¸€ä¸ªå­—ç¬¦åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ï¼Œå³"last index"**ï¼Œç›´è‡³æ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šè¿”å›`null`ï¼Œ`lastIndex`å˜ä¸º0

```javascript
let str=`
[sp]123[/sp]
[sp]å¼[/sp]
[sp]ohh[/sp]
`
reg=/<(sp)>[\s\S]*?<\/\1>/g
console.log(reg.exec(str));//æ‰¾åˆ°çš„åŒ¹é…æ–‡æœ¬åŠå…¶æœ‰å…³çš„ä¿¡æ¯
console.log(reg.lastIndex);//17
console.log(reg.exec(str));
console.log(reg.lastIndex);//32
console.log(reg.exec(str));
console.log(reg.lastIndex);//49
console.log(reg.exec(str));
console.log(reg.lastIndex);//0

```

åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œå¯ä»¥åœ¨è¾ƒä½ç«¯æµè§ˆå™¨ä¸‹å®ç°å­—ç¬¦ä¸²ä¸­çš„`matchAll`æ–¹æ³•

```javascript
while((res=reg.exec(str))){
	result.push(res)
}
//res=reg.exec(str)ä»…ä¸ºèµ‹å€¼æ“ä½œï¼Œåˆ¤æ–­ä¸º"==="!!!
//å°†æ¯æ¬¡çš„execç»“æœä¸´æ—¶å‚¨å­˜åœ¨resï¼Œç„¶åpushåˆ°resultæ•°ç»„ä¸­
```

ğŸ‘‰ `compile()`æ–¹æ³•

emmm...

## æ–­è¨€åŒ¹é…

> æ–­è¨€åŒ¹é…å°±æ˜¯æ­£åˆ™æ˜¯å¦åŒ¹é…çš„æ¡ä»¶ï¼Œå†™åœ¨åŸå­ç»„ä¸­

| é‡è¯    | æè¿°        |
| ------- | ----------- |
| `(?=)`  | åé¢ä¸º...   |
| `(?<=)` | å‰é¢ä¸º...   |
| `(?!)`  | åé¢ä¸ä¸º... |
| `(?<!)` | å‰é¢ä¸ä¸º... |

```javascript
/(?!.*.è¾£é¸¡*)/
//å¼€å§‹åˆ°ç»“å°¾ä»»æ„ä½ç½®ä¸èƒ½æœ‰"è¾£é¸¡"
```

